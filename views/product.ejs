<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Products - eCommerce</title>
    <link rel="stylesheet" href="/public/css/style.css">
</head>
<body>
    <h1>Product Listing</h1>
    <nav>
        <a href="/">Home</a> |
        <a href="/products">Products</a>
        <% if (isLoggedIn) { %>
          | <a href="/add-product">Add Product</a>
          | <a href="/logout">Logout</a>
        <% } else { %>
          | <a href="/login">Login</a>
        <% } %>
    </nav>
    
    <!-- Search Form -->
    <form action="/products" method="GET" class="search-bar">
        <input type="text" name="q" placeholder="Search products by name or category...">
        <button type="submit">Search</button>
    </form>
    
    <!-- Product Grid Layout -->
    <div class="product-grid">
        <% if (products && products.length > 0) { %>
            <% products.forEach(function(product) { %>
                <div class="product-card">
                    <img src="<%= product.image %>" alt="<%= product.name %>" style="width:100%;">
                    <h3><%= product.name %></h3>
                    <p>Price: $<%= product.price %></p>
                    <a href="/products/<%= product._id %>">View Details</a>
                </div>
            <% }); %>
        <% } else { %>
            <p>No products found.</p>
        <% } %>
    </div>

    <!-- Pagination Controls -->
    <div class="pagination">
        <% for (let i = 1; i <= totalPages; i++) { %>
            <a href="/products?page=<%= i %>" class="<%= currentPage === i ? 'active' : '' %>"><%= i %></a>
        <% } %>
    </div>

</body>
</html>
